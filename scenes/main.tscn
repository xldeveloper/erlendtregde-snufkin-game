[gd_scene load_steps=36 format=3 uid="uid://d0jqutw3c62wv"]

[ext_resource type="Texture2D" uid="uid://cfwm52xurxriy" path="res://assets/images/Mountan.png" id="1_52jxg"]
[ext_resource type="PackedScene" path="res://scenes/fog_system.tscn" id="1_fog_system"]
[ext_resource type="PackedScene" uid="uid://cu4vgvuaexi2s" path="res://scenes/player.tscn" id="1_g03jv"]
[ext_resource type="Texture2D" uid="uid://chmjgplg17fty" path="res://assets/images/Woodcolour.png" id="2_k03au"]
[ext_resource type="Script" uid="uid://b6vu5x0luntm8" path="res://scripts/button.gd" id="3_0tuu4"]
[ext_resource type="Texture2D" uid="uid://bblr56ahkr33k" path="res://assets/images/treeBackgroundfrfr.png" id="3_po7qr"]
[ext_resource type="Texture2D" uid="uid://cf633hn8t5vlm" path="res://assets/images/MoominHouseColour.png" id="4_e5bnu"]
[ext_resource type="PackedScene" uid="uid://lete45k7266y" path="res://scenes/ground.tscn" id="4_hijc5"]
[ext_resource type="PackedScene" uid="uid://cqchuxoe2q16a" path="res://scenes/rainlayer.tscn" id="4_shs03"]
[ext_resource type="PackedScene" uid="uid://cyxq3fmkosw2b" path="res://scenes/npc.tscn" id="5_iw87x"]
[ext_resource type="Texture2D" uid="uid://b8idpc6364s4t" path="res://assets/images/flowers1.png" id="5_rnkrj"]
[ext_resource type="Script" path="res://scripts/HouseInteraction.gd" id="5_trceg"]
[ext_resource type="Script" uid="uid://biitei8kw21e" path="res://scripts/FishingInteraction.gd" id="11_cufjj"]
[ext_resource type="Texture2D" uid="uid://b31hhmaobsx4v" path="res://assets/images/brideandwateranimation1.png" id="11_gqmmt"]
[ext_resource type="Texture2D" uid="uid://cgq3qe1kpfdvt" path="res://assets/images/brideandwateranimation2.png" id="13_yc10j"]
[ext_resource type="PackedScene" uid="uid://cs1n3g1rhfrap" path="res://scenes/FallingLeaves.tscn" id="14_a8y0u"]
[ext_resource type="PackedScene" uid="uid://blmvkqgkshack" path="res://scenes/WindGust.tscn" id="15_jkv2x"]
[ext_resource type="Script" uid="uid://bk7m3v5n8w4r2" path="res://scripts/WindGustSpawner.gd" id="16_jbj1t"]
[ext_resource type="Script" uid="uid://c8sjaojwoddrq" path="res://scripts/MuteButton.gd" id="17_mute"]
[ext_resource type="Texture2D" uid="uid://barbanunh1amr" path="res://assets/images/tent.png" id="18_dp3eg"]
[ext_resource type="Texture2D" uid="uid://c2cxntss3lbry" path="res://assets/images/fire1.png" id="19_0ld40"]
[ext_resource type="Texture2D" uid="uid://dbqty7vkf11uv" path="res://assets/images/fire22.png" id="20_gqmmt"]
[ext_resource type="Script" uid="uid://b2wf1r3xdhp76" path="res://scripts/map_opener.gd" id="22_map_opener"]
[ext_resource type="Script" uid="uid://b3iof5ixfo67" path="res://scripts/location_tracker.gd" id="23_location_tracker"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_a8y0u"]
size = Vector2(28.871292, 16.789165)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_pu8s4"]
size = Vector2(6, 20)

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_vplu8"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ftqk5"]
size = Vector2(385.5, 276)

[sub_resource type="Animation" id="Animation_y6deb"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [ExtResource("11_gqmmt")]
}

[sub_resource type="Animation" id="Animation_pm3ni"]
resource_name = "water"
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5, 1),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 1,
"values": [ExtResource("11_gqmmt"), ExtResource("13_yc10j"), ExtResource("11_gqmmt")]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_og1vs"]
_data = {
&"RESET": SubResource("Animation_y6deb"),
&"water": SubResource("Animation_pm3ni")
}

[sub_resource type="Animation" id="Animation_jscy8"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [ExtResource("19_0ld40")]
}

[sub_resource type="Animation" id="Animation_yc10j"]
resource_name = "fire"
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5, 1),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 1,
"values": [ExtResource("19_0ld40"), ExtResource("20_gqmmt"), ExtResource("19_0ld40")]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_pm3ni"]
_data = {
&"RESET": SubResource("Animation_jscy8"),
&"fire": SubResource("Animation_yc10j")
}

[sub_resource type="RectangleShape2D" id="RectangleShape2D_yc10j"]
size = Vector2(72, 502.5)

[node name="Main" type="Node2D"]
z_index = 9

[node name="HouseEntrance" type="Area2D" parent="."]
position = Vector2(2588, 683)
scale = Vector2(1.5, 1.5)
script = ExtResource("5_trceg")

[node name="CollisionShape2D" type="CollisionShape2D" parent="HouseEntrance"]
position = Vector2(-4.005432e-05, 233.33333)
rotation = -3.1415925
scale = Vector2(4.0409255, -6.1944723)
shape = SubResource("RectangleShape2D_a8y0u")

[node name="Label" type="Label" parent="HouseEntrance"]
visibility_layer = 17
z_index = 3
offset_left = -37.333336
offset_top = 150.0
offset_right = 83.666664
offset_bottom = 173.0
text = "Press E to enter"

[node name="ParallaxBackground" type="ParallaxBackground" parent="."]
layer = -10

[node name="Mountan" type="ParallaxLayer" parent="ParallaxBackground"]
motion_scale = Vector2(0.1, 0.1)

[node name="Mountan" type="TextureRect" parent="ParallaxBackground/Mountan"]
texture_filter = 3
texture_repeat = 1
offset_left = -2552.0
offset_top = 230.0
offset_right = 4548.0
offset_bottom = 742.0
mouse_filter = 2
texture = ExtResource("1_52jxg")
stretch_mode = 1

[node name="Forest" type="ParallaxLayer" parent="ParallaxBackground"]
z_index = 1
motion_scale = Vector2(0.4, 0.4)

[node name="forest" type="TextureRect" parent="ParallaxBackground/Forest"]
z_index = 1
texture_filter = 3
texture_repeat = 1
offset_left = -2681.0
offset_top = 398.0
offset_right = 4469.0
offset_bottom = 940.0
mouse_filter = 2
texture = ExtResource("2_k03au")
stretch_mode = 1

[node name="Tree" type="ParallaxLayer" parent="ParallaxBackground"]
z_index = 2
motion_scale = Vector2(0.6, 0.6)

[node name="tree" type="TextureRect" parent="ParallaxBackground/Tree"]
z_index = 2
texture_filter = 3
texture_repeat = 1
offset_left = -2731.0
offset_top = 699.0
offset_right = 4496.0
offset_bottom = 1239.0
scale = Vector2(1.0018263, 1)
texture = ExtResource("3_po7qr")
stretch_mode = 1

[node name="MoominHouse" type="ParallaxLayer" parent="ParallaxBackground"]
z_index = 2

[node name="MoominHouse" type="Sprite2D" parent="ParallaxBackground/MoominHouse"]
z_index = 2
position = Vector2(2588, 683)
scale = Vector2(1.5, 1.5)
texture = ExtResource("4_e5bnu")

[node name="FogSystem" parent="." instance=ExtResource("1_fog_system")]
foreground_fog_color = Color(0.95, 0.96, 0.98, 1)

[node name="ParallaxForeground" type="ParallaxBackground" parent="."]
layer = 100

[node name="Ground" type="ParallaxLayer" parent="ParallaxForeground"]
z_index = 100
z_as_relative = false

[node name="ground" type="TextureRect" parent="ParallaxForeground/Ground"]
z_index = 100
z_as_relative = false
offset_left = -1158.0
offset_top = 940.0
offset_right = 4461.0
offset_bottom = 1582.0
texture = ExtResource("5_rnkrj")
stretch_mode = 1

[node name="npc" parent="." instance=ExtResource("5_iw87x")]
z_index = 1000
position = Vector2(3351, 990)

[node name="CollisionShape2D2" type="CollisionShape2D" parent="npc"]
position = Vector2(-13, 0)
shape = SubResource("RectangleShape2D_pu8s4")

[node name="Sprite2D" type="Sprite2D" parent="."]
z_index = 5

[node name="Button" type="Button" parent="Sprite2D"]
z_index = 1
anchors_preset = -1
anchor_left = 328.0
anchor_top = -171.0
anchor_right = 345.0
anchor_bottom = -140.0
offset_left = -3.05176e-05
offset_top = 1.52588e-05
offset_right = -3.05176e-05
theme_override_styles/focus = SubResource("StyleBoxEmpty_vplu8")
text = "S"
flat = true
script = ExtResource("3_0tuu4")

[node name="RainLayer" parent="." instance=ExtResource("4_shs03")]
visible = false
z_index = 10
position = Vector2(1, -40)

[node name="Ground" parent="." instance=ExtResource("4_hijc5")]
position = Vector2(-23, -36)

[node name="Brigde" type="Sprite2D" parent="."]
z_index = 5
position = Vector2(-1470, 1114)
texture = ExtResource("11_gqmmt")

[node name="Area2D" type="Area2D" parent="Brigde"]
z_index = 1
collision_mask = 3
script = ExtResource("11_cufjj")

[node name="StaticBody2D" type="StaticBody2D" parent="Brigde/Area2D"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Brigde/Area2D/StaticBody2D"]
position = Vector2(-6, 21.5)
scale = Vector2(18.1, 5.65)
polygon = PackedVector2Array(10.4972, 4.51328, 6.57458, -0.97345, 2.98342, -4.1593, -0.165749, -4.33629, -3.70166, -3.80531, -6.40884, -1.85841, -11.381218, 5.929199)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Brigde/Area2D"]
position = Vector2(-9.25, -50)
shape = SubResource("RectangleShape2D_ftqk5")

[node name="Label" type="Label" parent="Brigde/Area2D"]
z_index = 1
offset_left = -145.0
offset_top = -136.0
offset_right = 161.0
offset_bottom = -81.0
text = "\"Press E to go fishing"

[node name="AnimationPlayer" type="AnimationPlayer" parent="Brigde"]
libraries = {
&"": SubResource("AnimationLibrary_og1vs")
}
autoplay = "water"

[node name="Player" parent="." instance=ExtResource("1_g03jv")]
z_index = 6
position = Vector2(688, 976)

[node name="FallingLeaves" parent="." instance=ExtResource("14_a8y0u")]
visible = false

[node name="WindGustSpawner" type="Node2D" parent="."]
script = ExtResource("16_jbj1t")
wind_gust_scene = ExtResource("15_jkv2x")
spawn_interval_max = 2.5
spawn_y_min = 600.0
spawn_y_max = 1100.0

[node name="UI" type="CanvasLayer" parent="."]

[node name="MuteButton" type="Button" parent="UI"]
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -80.0
offset_top = 10.0
offset_right = -10.0
offset_bottom = 50.0
grow_horizontal = 0
text = "ðŸ”Š"
script = ExtResource("17_mute")

[node name="VolumeSlider" type="HSlider" parent="UI/MuteButton"]
layout_mode = 0
offset_left = -160.0
offset_top = 10.0
offset_right = -10.0
offset_bottom = 30.0

[node name="Sprite2D2" type="Sprite2D" parent="."]
z_index = 5
position = Vector2(-150, 1015)
texture = ExtResource("18_dp3eg")

[node name="fireplace" type="Sprite2D" parent="."]
z_index = 5
position = Vector2(72, 1105)
texture = ExtResource("19_0ld40")

[node name="AnimationPlayer" type="AnimationPlayer" parent="fireplace"]
libraries = {
&"": SubResource("AnimationLibrary_pm3ni")
}
autoplay = "fire"

[node name="Node2D" type="StaticBody2D" parent="."]
position = Vector2(-2072, 1154)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Node2D"]
position = Vector2(0, -53.75)
shape = SubResource("RectangleShape2D_yc10j")

[node name="MapOpener" type="Node" parent="."]
script = ExtResource("22_map_opener")

[node name="LocationTracker" type="Node" parent="."]
script = ExtResource("23_location_tracker")

[connection signal="body_entered" from="HouseEntrance" to="HouseEntrance" method="_on_body_entered"]
[connection signal="body_exited" from="HouseEntrance" to="HouseEntrance" method="_on_body_exited"]
[connection signal="button_down" from="Sprite2D/Button" to="Sprite2D/Button" method="_on_button_button_down"]
[connection signal="button_up" from="Sprite2D/Button" to="Sprite2D/Button" method="_on_button_button_up"]
[connection signal="body_entered" from="Brigde/Area2D" to="Brigde/Area2D" method="_on_body_entered"]
[connection signal="body_exited" from="Brigde/Area2D" to="Brigde/Area2D" method="_on_body_exited"]
[connection signal="mouse_entered" from="UI/MuteButton" to="UI/MuteButton" method="_on_mouse_entered"]
[connection signal="mouse_exited" from="UI/MuteButton" to="UI/MuteButton" method="_on_mouse_exited"]
[connection signal="pressed" from="UI/MuteButton" to="UI/MuteButton" method="_on_pressed"]
